{
	"name": "menu_gamepad_selector",
	"events": [
		{
			"eventType": "variable",
			"name": "gamepad_in_use",
			"type": "string",
			"initialValue": "/",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 508221989354978
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Gamepad selector",
			"description": "Starts disabled",
			"isActiveOnStart": false,
			"children": [
				{
					"eventType": "block",
					"conditions": [],
					"actions": [],
					"sid": 732983155132497,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-value",
									"objectClass": "data_match_config",
									"sid": 516442091421057,
									"parameters": {
										"key": "\"match_players\"",
										"comparison": 0,
										"value": "MATCH_PLAYERS_1V1"
									}
								}
							],
							"actions": [],
							"sid": 301832502952292,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "has-key",
											"objectClass": "data_gamepad",
											"sid": 970660814595853,
											"parameters": {
												"key": "\"player0_gamepad_index\""
											}
										},
										{
											"id": "has-key",
											"objectClass": "data_gamepad",
											"sid": 335290787606211,
											"parameters": {
												"key": "\"player1_gamepad_index\""
											}
										},
										{
											"id": "trigger-once-while-true",
											"objectClass": "System",
											"sid": 755156304623705
										}
									],
									"actions": [
										{
											"id": "set-group-active",
											"objectClass": "System",
											"sid": 619778781595738,
											"parameters": {
												"group-name": "\"Character selector\"",
												"state": "activated"
											}
										},
										{
											"id": "set-group-active",
											"objectClass": "System",
											"sid": 112693977840965,
											"parameters": {
												"group-name": "\"Gamepad selector\"",
												"state": "deactivated"
											}
										}
									],
									"sid": 122791203887428
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-value",
									"objectClass": "data_match_config",
									"sid": 976272075176709,
									"parameters": {
										"key": "\"match_players\"",
										"comparison": 0,
										"value": "MATCH_PLAYERS_2V2"
									}
								}
							],
							"actions": [],
							"sid": 827007621200404,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "has-key",
											"objectClass": "data_gamepad",
											"sid": 317158217616947,
											"parameters": {
												"key": "\"player0_gamepad_index\""
											}
										},
										{
											"id": "has-key",
											"objectClass": "data_gamepad",
											"sid": 139939808801538,
											"parameters": {
												"key": "\"player1_gamepad_index\""
											}
										},
										{
											"id": "has-key",
											"objectClass": "data_gamepad",
											"sid": 916400980341097,
											"parameters": {
												"key": "\"player2_gamepad_index\""
											}
										},
										{
											"id": "has-key",
											"objectClass": "data_gamepad",
											"sid": 267157323984398,
											"parameters": {
												"key": "\"player3_gamepad_index\""
											}
										},
										{
											"id": "trigger-once-while-true",
											"objectClass": "System",
											"sid": 248172915577341
										}
									],
									"actions": [
										{
											"id": "set-group-active",
											"objectClass": "System",
											"sid": 945439223203256,
											"parameters": {
												"group-name": "\"Character selector\"",
												"state": "activated"
											}
										},
										{
											"id": "set-group-active",
											"objectClass": "System",
											"sid": 731738760307890,
											"parameters": {
												"group-name": "\"Gamepad selector\"",
												"state": "deactivated"
											}
										}
									],
									"sid": 356964049184895
								}
							]
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for",
							"objectClass": "System",
							"sid": 689822159813845,
							"parameters": {
								"name": "\"\"",
								"start-index": "0",
								"end-index": "MAX_GAMEPAD"
							}
						}
					],
					"actions": [],
					"sid": 562162622690781,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-button-pressed",
									"objectClass": "Gamepad",
									"sid": 892687891732982,
									"parameters": {
										"gamepad": "loopindex",
										"button": "button-a"
									}
								}
							],
							"actions": [
								{
									"callFunction": "savePlayerGamepad",
									"sid": 680167985737893,
									"parameters": [
										"loopindex"
									]
								}
							],
							"sid": 983719283694325
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-any-key-pressed",
							"objectClass": "Keyboard",
							"sid": 764450276577760
						}
					],
					"actions": [
						{
							"callFunction": "savePlayerGamepad",
							"sid": 754226087142879,
							"parameters": [
								"9"
							]
						}
					],
					"sid": 252606831337098
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for",
							"objectClass": "System",
							"sid": 867189587941683,
							"parameters": {
								"name": "\"\"",
								"start-index": "0",
								"end-index": "MAX_GAMEPAD"
							}
						}
					],
					"actions": [],
					"sid": 679076438540266,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-button-pressed",
									"objectClass": "Gamepad",
									"sid": 524177963759907,
									"parameters": {
										"gamepad": "loopindex",
										"button": "button-b"
									}
								}
							],
							"actions": [],
							"sid": 172562185818369,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 556431040526065,
											"parameters": {
												"first-value": "Functions.isSelectingChar",
												"comparison": 0,
												"second-value": "0"
											}
										}
									],
									"actions": [
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 317005995226110,
											"parameters": {
												"seconds": "0"
											}
										},
										{
											"callFunction": "goToView",
											"sid": 229036439048450,
											"parameters": [
												"MN_VIEW_MAIN"
											]
										},
										{
											"id": "restart-layout",
											"objectClass": "System",
											"sid": 986484913752261
										}
									],
									"sid": 568790593189924
								}
							]
						}
					]
				},
				{
					"functionName": "savePlayerGamepad",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "index",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 900299474148466
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 189398752734386,
					"children": [
						{
							"eventType": "variable",
							"name": "toPlayer",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 269219257025550
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "test-regex",
									"objectClass": "System",
									"sid": 540794600043115,
									"parameters": {
										"string": "gamepad_in_use",
										"regex": "str(index)",
										"flags": "\"gi\""
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 558340013488967,
									"parameters": {
										"variable": "toPlayer",
										"value": "Functions.getFirstNotUsedPlayerSlot"
									}
								}
							],
							"sid": 660066934627264,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-evaluate",
											"objectClass": "System",
											"sid": 778296893957119,
											"parameters": {
												"object": "menu_gamepad_selector",
												"expression": "menu_gamepad_selector.player = toPlayer"
											}
										}
									],
									"actions": [
										{
											"id": "add-key",
											"objectClass": "data_gamepad",
											"sid": 387010138638804,
											"parameters": {
												"key": "\"player\"&toPlayer&\"_gamepad_index\"",
												"value": "index"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 743333062363484,
											"parameters": {
												"variable": "gamepad_in_use",
												"value": "gamepad_in_use & \"/\" & index"
											}
										},
										{
											"id": "set-animation",
											"objectClass": "menu_gamepad_selector",
											"sid": 655420689150149,
											"parameters": {
												"animation": "\"player\"&toPlayer&\"_ok\"",
												"from": "beginning"
											}
										}
									],
									"sid": 138377738779490
								}
							]
						}
					]
				},
				{
					"functionName": "isSelectingChar",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "number",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 570192622675540,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-group-active",
									"objectClass": "System",
									"sid": 427454904946036,
									"parameters": {
										"group-name": "\"Character selector\""
									}
								}
							],
							"actions": [
								{
									"id": "set-function-return-value",
									"objectClass": "Functions",
									"sid": 816556325432183,
									"parameters": {
										"value": "1"
									}
								}
							],
							"sid": 807708251006906
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 979857724586174
								}
							],
							"actions": [
								{
									"id": "set-function-return-value",
									"objectClass": "Functions",
									"sid": 328748783027166,
									"parameters": {
										"value": "0"
									}
								}
							],
							"sid": 163866495191530
						}
					]
				}
			],
			"sid": 363805874921494
		},
		{
			"functionName": "getFirstNotUsedPlayerSlot",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "number",
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "function-block",
			"conditions": [],
			"actions": [],
			"sid": 104086935311296,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "has-key",
							"objectClass": "data_gamepad",
							"sid": 273153456604103,
							"parameters": {
								"key": "\"player0_gamepad_index\""
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "set-function-return-value",
							"objectClass": "Functions",
							"sid": 958740027431959,
							"parameters": {
								"value": "0"
							}
						}
					],
					"sid": 570996811390165
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 167842318964038
						},
						{
							"id": "has-key",
							"objectClass": "data_gamepad",
							"sid": 439817230256808,
							"parameters": {
								"key": "\"player1_gamepad_index\""
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "set-function-return-value",
							"objectClass": "Functions",
							"sid": 656897715993613,
							"parameters": {
								"value": "1"
							}
						}
					],
					"sid": 476155089027460
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 154084475971621
						},
						{
							"id": "has-key",
							"objectClass": "data_gamepad",
							"sid": 992480270501115,
							"parameters": {
								"key": "\"player2_gamepad_index\""
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "set-function-return-value",
							"objectClass": "Functions",
							"sid": 974097101644669,
							"parameters": {
								"value": "2"
							}
						}
					],
					"sid": 486532803050903
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 139282409111878
						},
						{
							"id": "has-key",
							"objectClass": "data_gamepad",
							"sid": 194448081913230,
							"parameters": {
								"key": "\"player3_gamepad_index\""
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "set-function-return-value",
							"objectClass": "Functions",
							"sid": 503814009006906,
							"parameters": {
								"value": "3"
							}
						}
					],
					"sid": 275618854169479
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 737011235288244
						}
					],
					"actions": [
						{
							"id": "set-function-return-value",
							"objectClass": "Functions",
							"sid": 596909502933767,
							"parameters": {
								"value": "9"
							}
						}
					],
					"sid": 481577599579348
				}
			]
		}
	],
	"sid": 646022892636580
}